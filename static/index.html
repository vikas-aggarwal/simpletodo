<!DOCTYPE html>
<html>
  <head>
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css"/>
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.1/jquery.mobile-1.4.1.min.css">
    <link rel = "stylesheet" href = "https://rawgithub.com/arschmitz/jquery-mobile-datepicker-wrapper/master/jquery.mobile.datepicker.css" />
    
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.1/jquery.mobile-1.4.1.min.js"></script>
    <script src="https://rawgithub.com/jquery/jquery-ui/1.10.4/ui/jquery.ui.datepicker.js"></script>
    <script src="https://rawgithub.com/arschmitz/jquery-mobile-datepicker-wrapper/master/jquery.mobile.datepicker.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>
    <script src="utils.js"></script>    
    <script src="app.js"></script>

    <style>
      #ui-datepicker-div { z-index:10 !important;}
    </style>
  </head>
  
  <body>
    <div data-role="page" id="mainpage">
      <div data-role="header">
	<h1>Tasks</h1>
	<a href="#createPage" data-icon="plus" class="ui-btn-right">New</a>
      </div>
      <div data-role="main" class="ui-content" id="tasklist">
	
      </div>
    </div>
    
    <div data-role="page" id="createPage">
      <div data-role="header">
	<h1>New Task</h1>
	<a href="#mainpage" data-icon="back">Back</a>
      </div>
      <div data-role="main" class="ui-content" id="create_content">
	
	
	<button class="ui-btn" id="createSubmitBtn">Submit</button>
	
      </div>
    </div>
    
    
    <div data-role="page" id="editPage">
      <div data-role="header">
	<h1>Edit Task</h1>
	<a href="#mainpage" data-icon="back">Back</a>
      </div>
      <div data-role="main" class="ui-content" id="edit_content">
	<input type="hidden" name="edit_todo_id" id="edit_todo_id" value="0">
	<button class="ui-btn" id="editSubmitBtn">Submit</button>
      </div>
    </div>


    <script type="text/html" id="task_form_template">
      <label for="taskTitle">Title:</label>
      <input type="text" name="taskTitle" id="{{action}}_taskTitle">
      <label for="freq">Frequency:</label>
      <input type="text" name="freq" id="{{action}}_freq">
      <label for="dueDate">Due Date:</label>
      <span><input type="text" name="dueDate" id="{{action}}_dueDate" /></span>
      <fieldset data-role="controlgroup" data-type="horizontal">
	<legend>Choose Slot:</legend>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slotNone" value="{{action}}_slotNone" checked="checked"/><label for="{{action}}_slotNone">None</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot1" value="{{action}}_slot1" /><label for="{{action}}_slot1">1</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot2" value="{{action}}_slot2" /><label for="{{action}}_slot2">2</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot3" value="{{action}}_slot3" /><label for="{{action}}_slot3">3</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot4" value="{{action}}_slot4" /><label for="{{action}}_slot4">4</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot5" value="{{action}}_slot5" /><label for="{{action}}_slot5">5</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot6" value="{{action}}_slot6" /><label for="{{action}}_slot6">6</label>
      </fieldset>
      <label for="remindBefore">Remind Before (Days):</label>
      <input type="text" name="remindBeforeDays" id="{{action}}_remindBeforeDays">
      <label>
        <input name="checkbox" type="checkbox" id="{{action}}_trackHabit">Track Habit
    </label>
    </script>
    


    <script type="text/html" id="listview-template">
      <li data-region-id="{{todo_id}}_region">
	<div class="ui-grid-a">
	  <div class="ui-block-a">
	    <a id="{{todo_id}}_edit_link"><h3 class="ui-li-header" style="display:inline" >{{taskName}}</h3></a>
	    <p>{{taskFrequency}}</p>
	    <p>
	      <span>Due:</span>
	      <span id="{{todo_id}}_label_due">{{dateString}}</span>
	    </p>
	    <p>
	      <span>Next:</span>
	      <span id="{{todo_id}}_label_next">{{dateString}}</span>
	      <input type="text" hidden="hidden" id="{{todo_id}}_date" data-role="date" readonly="readonly" value="{{dateString}}">
	    </p>
	    
	  </div>
	  <div class="ui-block-b">
	    
	    
	    <p style="float:right">
	      {{^trackHabit}}
	      <button class="ui-btn ui-icon-check ui-btn-icon-left ui-mini {{todo_id}}_action" onclick="markAsDone({{todo_id}})">Done</button>
	      {{/trackHabit}}
	      {{#trackHabit}}
	      <button class="ui-btn ui-icon-check ui-btn-icon-left ui-mini {{todo_id}}_action ui-state-disabled" onclick="markAsDone({{todo_id}})">Done</button>
	      <button class="ui-btn ui-icon-delete ui-btn-icon-left ui-mini {{todo_id}}_action ui-state-disabled" onclick="markAsSkip({{todo_id}})">Skip</button>
	      {{/trackHabit}}
	      <img id="{{todo_id}}_loading" src="loading.gif" style="float:right;display:none"/>
	      <img id="{{todo_id}}_success" src="check.png" style="float:right;display:none"/>
	      <img id="{{todo_id}}_failed" src="alert.png" style="float:right;display:none"/>
	     
	    </p>
	    
	  </div>
	  {{#dueIn}}
	  <div class="ui-block-a">
	  </div>
	  <div class="ui-block-b">
	    <p style="text-align: right;color:green">{{dueIn}}</p>
	  </div>
	  {{/dueIn}}
	</div>
	
	
      </li>
    </script>
    
    



  </body>
  
  
</html>
