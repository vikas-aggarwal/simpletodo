<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/jquery.mobile-1.4.1.min.css">
    <script src="libs/require.min.js" data-main="app"></script>
    
    <style>
      #ui-datepicker-div { z-index:10 !important;}

      .progressBar {
	font-size: 0em;
	border: 1px;
      }

      .progressBar-success {
      display : inline-block;
      background : lightgreen;
      height:5px;
      }

      .progressBar-failure{
      display:inline-block;
      background: lightsalmon;
      height:5px;
      }

      #loadingPane {
	  position : absolute;
	  height : 100%;
	  width : 100%;
	  background : white;
      }


      #loadingPane > img {
	display: block;
	margin: 0 auto;
      }

      
    </style>
  </head>
  
  <body>
    <div id="loadingPane">
      <img src="img/ajax-loader.gif">
    </div>
    
    <div data-role="page" id="mainpage">
      <div data-role="header">
	<h1>Tasks</h1>
	<a href="#createPage" data-icon="plus" class="ui-btn-right">New</a>
      </div>
      <div data-role="main" class="ui-content" id="tasklist">	
      </div>
    </div>
    
    <div data-role="page" id="createPage">
      <div data-role="header">
	<h1>New Task</h1>
	<a href="#mainpage" data-icon="back">Back</a>
      </div>
      <div data-role="main" class="ui-content" id="create_content">
	<button class="ui-btn" id="createSubmitBtn">Submit</button>
      </div>
    </div>
    
    
    <div data-role="page" id="editPage">
      <div data-role="header">
	<h1>Edit Task</h1>
	<a href="#mainpage" data-icon="back">Back</a>
      </div>
      <div data-role="main" class="ui-content" id="edit_content">
	<input type="hidden" name="edit_todo_id" id="edit_todo_id" value="0">
	<button class="ui-btn" id="editSubmitBtn">Submit</button>
      </div>
    </div>


    <script type="text/html" id="task_form_template">
      <label for="taskTitle">Title:</label>
      <input type="text" name="taskTitle" id="{{action}}_taskTitle">
      <label for="freq">Frequency:</label>
      <input type="text" name="freq" id="{{action}}_freq">
      <label for="dueDate">Due Date:</label>
      <span><input type="date" name="dueDate" id="{{action}}_dueDate" /></span>
      <fieldset data-role="controlgroup" data-type="horizontal">
	<legend>Choose Slot:</legend>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slotNone" value="{{action}}_slotNone" checked="checked"/><label for="{{action}}_slotNone">None</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot1" value="{{action}}_slot1" /><label for="{{action}}_slot1">1</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot2" value="{{action}}_slot2" /><label for="{{action}}_slot2">2</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot3" value="{{action}}_slot3" /><label for="{{action}}_slot3">3</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot4" value="{{action}}_slot4" /><label for="{{action}}_slot4">4</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot5" value="{{action}}_slot5" /><label for="{{action}}_slot5">5</label>
	<input type="radio" name="{{action}}_slot" id="{{action}}_slot6" value="{{action}}_slot6" /><label for="{{action}}_slot6">6</label>
      </fieldset>
      <label for="remindBefore">Remind Before (Days):</label>
      <input type="text" name="remindBeforeDays" id="{{action}}_remindBeforeDays">
      <label>
        <input name="checkbox" type="checkbox" id="{{action}}_trackHabit">Track Habit
    </label>
    </script>
    


    <script type="text/html" id="listview-template">
      <li data-region-id="{{todo_id}}_region">
	<div class="ui-grid-a">
	  <div class="ui-block-a">
	    <a id="{{todo_id}}_edit_link"><h3 class="ui-li-header" style="display:inline" >{{taskName}}</h3></a>
	    <p id="{{todo_id}}_frequency_label">{{taskFrequency}}</p>
	    <p>
	      <span>Due:</span>
	      <span id="{{todo_id}}_label_due">{{dateString}}</span>
	    </p>
	    <p>
	      <span>Next:</span>
	      <input type="date" id="{{todo_id}}_date" value="{{dateString}}">
	    </p>
	    {{#trackHabit}}
            <div class="progressBar">
	      <div class="progressBar-success" style="width:{{donePercent}}%;"></div>
	      <div class="progressBar-failure" style="width:{{skipPercent}}%;"></div>
	    </div>
	    {{/trackHabit}}
	  </div>
	  <div class="ui-block-b">
	    
	    
	    <p style="float:right">
	      {{^trackHabit}}
	      <button class="ui-btn ui-icon-check ui-btn-icon-left ui-mini ui-state-disabled {{todo_id}}_action done-button todo-button">Done</button>
	      {{/trackHabit}}
	      {{#trackHabit}}
	      <button class="ui-btn ui-icon-check ui-btn-icon-left ui-mini {{todo_id}}_action ui-state-disabled done-button todo-button">Done ({{doneCount}})</button>
	      <button class="ui-btn ui-icon-delete ui-btn-icon-left ui-mini {{todo_id}}_action ui-state-disabled skip-button todo-button">Skip ({{skipCount}})</button>
	      {{/trackHabit}}
	      <img id="{{todo_id}}_loading" src="loading.gif" style="float:right;display:none"/>
	      <img id="{{todo_id}}_success" src="check.png" style="float:right;display:none"/>
	      <img id="{{todo_id}}_failed" src="alert.png" style="float:right;display:none"/>
	     
	    </p>
	    
	  </div>
	  {{#dueIn}}
	  <div class="ui-block-a">
	  </div>
	  <div class="ui-block-b">
	    <p style="text-align: right;color:green">{{dueIn}}</p>
	  </div>
	  {{/dueIn}}
	</div>
	
	
      </li>
    </script>
    
    



  </body>
  
  
</html>
